<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>weixiaobo88.github.io</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="weixiaobo88.github.io">
<meta property="og:url" content="http://weixiaobo88.github.io/index.html">
<meta property="og:site_name" content="weixiaobo88.github.io">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="weixiaobo88.github.io">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="weixiaobo88.github.io" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">weixiaobo88.github.io</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Just do it !</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://weixiaobo88.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-20160118-functional-programming-monad" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/18/20160118-functional-programming-monad/" class="article-date">
  <time datetime="2016-01-18T12:18:14.000Z" itemprop="datePublished">2016-01-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/18/20160118-functional-programming-monad/">Monad</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>参考: </p>
<ul>
<li><a href="http://www.ruanyifeng.com/blog/2015/07/monad.html?utm_source=tuicool" target="_blank" rel="external">图解 Monad</a></li>
<li><a href="https://en.wikipedia.org/wiki/Monad_%28functional_programming%29" target="_blank" rel="external">Monad Wiki</a></li>
</ul>
<p>软件的基本结构就是数据+过程</p>
<p>数据: 数据类型<br>过程: 顺序, 分支, 循环</p>
<p>值函数: 处理值的函数</p>
<h2 id="Monad__u662F_u4EC0_u4E48"><a href="#Monad__u662F_u4EC0_u4E48" class="headerlink" title="Monad 是什么"></a>Monad 是什么</h2><p>Monad 是一个描绘了一系列计算步骤的结构, 其中这个结构的 type 定义了如何把操作链起来, 或者把那个 type 的函数嵌套起来<br>表示将一个运算过程，通过函数拆解成互相连接的多个步骤。<br>你只要提供下一步运算所需的函数，整个运算就会自动进行下去。</p>
<h2 id="u4E3A_u4EC0_u4E48_u4F1A_u6709_Monad_2C__u5B83_u7684_u51FA_u73B0_u89E3_u51B3_u4E86_u4EC0_u4E48_u95EE_u9898"><a href="#u4E3A_u4EC0_u4E48_u4F1A_u6709_Monad_2C__u5B83_u7684_u51FA_u73B0_u89E3_u51B3_u4E86_u4EC0_u4E48_u95EE_u9898" class="headerlink" title="为什么会有 Monad, 它的出现解决了什么问题"></a>为什么会有 Monad, 它的出现解决了什么问题</h2><h2 id="Monad__u6709_u4EC0_u4E48_u7528"><a href="#Monad__u6709_u4EC0_u4E48_u7528" class="headerlink" title="Monad 有什么用"></a>Monad 有什么用</h2><h2 id="Monad__u5982_u4F55_u7528_u8D77_u6765"><a href="#Monad__u5982_u4F55_u7528_u8D77_u6765" class="headerlink" title="Monad 如何用起来"></a>Monad 如何用起来</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://weixiaobo88.github.io/2016/01/18/20160118-functional-programming-monad/" data-id="cijms6q8i0003koqfxjdo39za" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/">functional-programming</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2013-12-31-whats-jekyll" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/18/2013-12-31-whats-jekyll/" class="article-date">
  <time datetime="2016-01-18T12:16:34.000Z" itemprop="datePublished">2016-01-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/18/2013-12-31-whats-jekyll/">What&#39;s Jekyll?</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://jekyllrb.com" target="_blank" rel="external">Jekyll</a> is a static site generator, an open-source tool for creating simple yet powerful websites of all shapes and sizes. From <a href="https://github.com/jekyll/jekyll/blob/master/README.markdown" target="_blank" rel="external">the project’s readme</a>:</p>
<blockquote>
<p>Jekyll is a simple, blog aware, static site generator. It takes a template directory […] and spits out a complete, static website suitable for serving with Apache or your favorite web server. This is also the engine behind GitHub Pages, which you can use to host your project’s page or blog right here from GitHub.</p>
</blockquote>
<p>It’s an immensely useful tool. Find out more by <a href="https://github.com/jekyll/jekyll" target="_blank" rel="external">visiting the project on GitHub</a>.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://weixiaobo88.github.io/2016/01/18/2013-12-31-whats-jekyll/" data-id="cijms6q800000koqfpw7u5nix" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/04/hello-world/" class="article-date">
  <time datetime="2015-08-04T01:07:34.000Z" itemprop="datePublished">2015-08-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/04/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick_Start"><a href="#Quick_Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create_a_new_post"><a href="#Create_a_new_post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run_server"><a href="#Run_server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate_static_files"><a href="#Generate_static_files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy_to_remote_sites"><a href="#Deploy_to_remote_sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://weixiaobo88.github.io/2015/08/04/hello-world/" data-id="cijms6q8g0002koqf8etcl1jf" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2015-03-19-webfont" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/04/2015-03-19-webfont/" class="article-date">
  <time datetime="2015-08-04T01:07:34.000Z" itemprop="datePublished">2015-08-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/04/2015-03-19-webfont/">学习web fonts</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>听到别人一直在说web fonts，脑子里大概知道什么，又确切的感觉好像不是很清晰的了解。<br>想尝试搞清楚，于是问了自己几个问题：</p>
<ul>
<li><a href="#why">为什么会出现web fonts，它的出现解决了什么问题</a></li>
<li><a href="#what">什么是web fonts</a></li>
<li><a href="#how">怎么用web fonts</a></li>
</ul>
<p></p><h2 id="why">为什么会出现web fonts，它的出现解决了什么问题</h2><br>在web fonts没有出现以前，网页上正常显示fonts的前提是用户已经安装了相应的字体。<p></p>
<p></p><h2 id="what">什么是web fonts</h2><br>web fonts是在线字体或者网络字体，是CSS3中的一个模块，可以把自定义的特殊字体嵌入到网页中。<p></p>
<p></p><h2 id="how">怎么用web fonts</h2><br>既然web fonts是CSS3中的一个模块，那用起来自然就是用CSS实现，两步：<p></p>
<ul>
<li>首先用@font-face定义字体</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">font-face</span></span><span class="rules">&#123;</span><br><span class="line">	<span class="rule"><span class="attribute">font-family</span>:<span class="value"> <span class="string">'MyWebFont'</span></span></span>;</span><br><span class="line">	<span class="rule"><span class="attribute">src</span>:<span class="value"> <span class="function">url</span>(<span class="string">'WebFont.eot'</span>)</span></span>;</span><br><span class="line">	<span class="rule"><span class="attribute">src</span>:<span class="value"> <span class="function">url</span>(<span class="string">'WebFont.eot?#iefix'</span>) <span class="function">format</span>(<span class="string">'embedded-opentype'</span>),</span><br><span class="line">	     <span class="function">url</span>(<span class="string">'WebFont.woff'</span>) <span class="function">format</span>(<span class="string">'woff'</span>),</span><br><span class="line">	     <span class="function">url</span>(<span class="string">'WebFont.ttf'</span>) <span class="function">format</span>(<span class="string">'truetype'</span>),</span><br><span class="line">	     <span class="function">url</span>(<span class="string">'WebFont.svg#webfont'</span>) <span class="function">format</span>(<span class="string">'svg'</span>)</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<div class="small"><br>那么字体哪里来呢？<br></div>


<ul>
<li>然后该怎么使用呢？既然webfont也是一种font，就按照font来用就好了，一般来说相关的在线网站都会介绍使用方法。<br>比如<a href="https://www.zybuluo.com/cherishpeace/note/46809" target="_blank" rel="external">这里有一个介绍</a></li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">p</span> <span class="rules">&#123; <span class="rule"><span class="attribute">font-family</span>:<span class="value"> <span class="string">'MyWebFont'</span>, Arial, sans-serif</span></span>; &#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face" target="_blank" rel="external">@font-face</a></li>
<li><a href="http://gejiawen.github.io/2015/03/04/CSS/WebFont%E4%B8%8E%E9%A1%B5%E9%9D%A2ICON%E5%9B%BE%E6%A0%87%E7%A0%94%E7%A9%B6/" target="_blank" rel="external">WebFont与页面ICON图标研究</a></li>
</ul>
<!-- icon font
网页上的小图标称之为页面icon，这些icon基本都是设计师来制作的，起初设计师将网页需要的icon统统丢给dev，然后dev就将这些icon用在网页的不同的地方。

这样有什么问题吗？
每显示一张图片，都会向服务器发送一次请求，图片越多，请求次数越多，造成延迟的可能性就越大。

于是为了解决这个问题，设计师或者dev就将这些图标按照一定顺序和方式合并在一起，这种方式称为css sprites或者图片精灵。dev怎么用呢，他们就通过写CSS来控制不同图标的background-position属性。

这样又有什么问题吗？
dev需要匹配每个icon的position属性，而且同一个icon不同尺寸也需要设计师设计多套icon，更可怜的是，如果中间某个icon发生变化，那么多米诺效应就会发生，在那个图标之后的所有图标的CSS代码都有可能修改。

icon font倒是可以或多或少解决这个问题，当然两者并不冲突。

<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby"> 你可以去免费的网站下载，比如 <span class="symbol">https:</span>/<span class="regexp">/icomoon.io/app</span></span><br><span class="line"></span>-<span class="ruby"> 也可以去收费的网站购买字体使用授权</span><br><span class="line"></span>-<span class="ruby"> 当然还可以自己设计字体</span></span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
-->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://weixiaobo88.github.io/2015/08/04/2015-03-19-webfont/" data-id="cijms6q9e000ukoqftw9a4kus" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-test" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/03/test/" class="article-date">
  <time datetime="2015-08-03T10:50:33.000Z" itemprop="datePublished">2015-08-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/03/test/">test</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://weixiaobo88.github.io/2015/08/03/test/" data-id="cijms6q890001koqfezjm15mp" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2015-07-29-spring-004-database" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/29/2015-07-29-spring-004-database/" class="article-date">
  <time datetime="2015-07-29T10:08:50.000Z" itemprop="datePublished">2015-07-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/29/2015-07-29-spring-004-database/">Database</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Spring_4_Data_Access"><a href="#Spring_4_Data_Access" class="headerlink" title="Spring 4 Data Access"></a>Spring 4 Data Access</h2><p>许多开发人员将应用程序中的持久化对象称为仓库（repository），有时候也将其称为数据访问对象 DAO （Data access object）。<br>DAO提供了数据读取和写入到数据库中的一种方式。</p>
<h3 id="u8BBE_u8BA1_u6570_u636E_u8BBF_u95EE_u5C42_u7684_u597D_u5904"><a href="#u8BBE_u8BA1_u6570_u636E_u8BBF_u95EE_u5C42_u7684_u597D_u5904" class="headerlink" title="设计数据访问层的好处"></a>设计数据访问层的好处</h3><ul>
<li>使得服务对象易于测试，因为它们不再与特定的数据访问实现绑定在一起。可以为这些数据访问接口创建mock实现，可以让你无需连接数据库就能测试服务对象，这会显示提升单元测试的效率并排除因数据不一致所造成的测试失败。</li>
<li>数据访问层是以持久化技术无关的方式来进行访问的。持久化方式的选择对于DAO，只有相关的数据访问方法通过接口来进行发布。这可以实现灵活的设计并使得切换持久化框架对应用程序其他部分带来的影响最小。</li>
</ul>
<h3 id="u53EF_u80FD_u5BFC_u81F4_u629B_u51FA_SQLException__u7684_u5E38_u89C1_u95EE_u9898"><a href="#u53EF_u80FD_u5BFC_u81F4_u629B_u51FA_SQLException__u7684_u5E38_u89C1_u95EE_u9898" class="headerlink" title="可能导致抛出 SQLException 的常见问题"></a>可能导致抛出 SQLException 的常见问题</h3><ul>
<li>应用程序无法连接数据库</li>
<li>要执行的查询语法有语法错误</li>
<li>查询中所使用的表或列不存在</li>
<li>视图插入或更新的数据违反了数据库的完整性约束</li>
</ul>
<h3 id="u6355_u83B7_u7684_u65F6_u5019_u9762_u4E34_u7684_u4E24_u4E2A_u95EE_u9898"><a href="#u6355_u83B7_u7684_u65F6_u5019_u9762_u4E34_u7684_u4E24_u4E2A_u95EE_u9898" class="headerlink" title="捕获的时候面临的两个问题"></a>捕获的时候面临的两个问题</h3><ul>
<li>JDBC 的 SQLException 是通用异常，而且不会提示异常类型。</li>
<li>一些持久化框架提供了相对丰富的异常体现，比如 Hibernate，但是 Hibernate 的异常是其本身特有的，这种持久化机制不能独立于数据访问层。</li>
</ul>
<h3 id="Spring_JDBC"><a href="#Spring_JDBC" class="headerlink" title="Spring JDBC"></a>Spring JDBC</h3><p>Spring JDBC 解决了上述两个问题， 它提供了多种类型，都继承自 DataAccessException，是一个非检查型异常。</p>
<p>为了使用 Spring 的数据访问异常，需要使用 Spring 提供的数据访问模板。</p>
<p>Spring 将数据访问过程中固定的和可变的部分明确划分为两个不同的类：</p>
<ul>
<li>模板，管理过程中固定的部分，比如事务控制、管理资源、处理异常</li>
<li>回调，处理自定义的数据访问代码，应用程序相关的数据访问（创建语句、绑定参数以及整理结果集）在回调的实现中处理</li>
</ul>
<p>不同的持久化平台有不同的模板，JDBC 对于 JdbcTemplate，Hibernate 对应 HibernateTemplate。</p>
<h2 id="u53C2_u8003_u8D44_u6599"><a href="#u53C2_u8003_u8D44_u6599" class="headerlink" title="参考资料"></a>参考资料</h2><p>《Spring in Action》</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://weixiaobo88.github.io/2015/07/29/2015-07-29-spring-004-database/" data-id="cijms6q8n0006koqfrs88chcu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spring/">spring</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2015-07-14-spring-003-config" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/14/2015-07-14-spring-003-config/" class="article-date">
  <time datetime="2015-07-14T10:08:50.000Z" itemprop="datePublished">2015-07-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/14/2015-07-14-spring-003-config/">开始学习Spring</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="u5F00_u59CB_u5B66_u4E60Spring"><a href="#u5F00_u59CB_u5B66_u4E60Spring" class="headerlink" title="开始学习Spring"></a>开始学习Spring</h1><h2 id="Spring_4_Configuration"><a href="#Spring_4_Configuration" class="headerlink" title="Spring 4 Configuration"></a>Spring 4 Configuration</h2><p>Spring中核心IoC功能的补充：</p>
<ul>
<li>管理bean的生命周期</li>
<li>使bean能够“Spring aware”</li>
<li>使用FactoryBeans</li>
<li>JavaBeans PropertyEditors</li>
<li>使用Java类来配置</li>
<li>进阶配置</li>
<li>使用Groovy配置</li>
</ul>
<h2 id="u53C2_u8003_u8D44_u6599"><a href="#u53C2_u8003_u8D44_u6599" class="headerlink" title="参考资料"></a>参考资料</h2><p>《Pro Spring 4 Edition》</p>
<hr>
<h2 id="u300ASpring_in_Action_u300B"><a href="#u300ASpring_in_Action_u300B" class="headerlink" title="《Spring in Action》"></a>《Spring in Action》</h2><p>如何创建容器 -》 有了容器，如何装配Bean -》知道装配Bean，如果Bean很多，XML文件就很复杂 -》如何减少XML的配置</p>
<h2 id="Spring__u5E94_u7528_u4E0A_u4E0B_u6587"><a href="#Spring__u5E94_u7528_u4E0A_u4E0B_u6587" class="headerlink" title="Spring 应用上下文"></a>Spring 应用上下文</h2><ul>
<li>Spring 容器是什么，有什么用</li>
<li>如何创建 Spring 容器</li>
</ul>
<p>Spring容器是Spring框架的核心，Spring自带了几种容器实现，可以归为两类：</p>
<ul>
<li>BeanFactory是最简单的容器，提供基础的依赖注入和Bean装配服务</li>
<li>ApplicationContext 应用上下文（用的更多）<ul>
<li>Spring通过应用上下文（Application Context）装载Bean的定义并把它们组装起来。Spring应用上下文全权负责对象的创建和组装。Spring自带了几种应用上下文的实现，它们之间主要的区别仅仅是如何加载它们的配置。用的最多的是3种：<ul>
<li>ClassPathXmlApplicationContext，从类路径下的XML配置文件中加载上下文定义，把应用上下文文件当做类资源</li>
<li>FileSystemXmlApplicationContext，读取文件系统中的XML配置文件并加载上下文定义</li>
<li>XmlWebApplicationContext，读取Web应用下的XML配置文件并装载上下文定义</li>
</ul>
</li>
<li>通过现有的应用上下文引用，你可以调用应用上下文的getBean()方法从Spring容器中获取Bean。</li>
</ul>
</li>
</ul>
<p>在Spring应用中，Spring容器会创建相互协作的组件之间的关联。负责创建对象、装配（Wiring）对象、配置对象，管理对象的整个生命周期。</p>
<pre><code>创建应用组件之间协作的行为通常称为装配。在Spring中装配Bean最常见的方式是使用XML文件。
</code></pre><h2 id="Bean_u7684_u5B9E_u4F8B_u5316"><a href="#Bean_u7684_u5B9E_u4F8B_u5316" class="headerlink" title="Bean的实例化"></a>Bean的实例化</h2><p>在Spring中，默认情况下，所有的bean都是单例。ApplicationContext.getBean()总是返回同一个实例。</p>
<h3 id="Bean__u7684_u4F5C_u7528_u57DF"><a href="#Bean__u7684_u4F5C_u7528_u57DF" class="headerlink" title="Bean 的作用域"></a>Bean 的作用域</h3><p>如果需要每次请求时都获得唯一的Bean实例，可以通过配置Bean的作用域 scope属性。<br>Spring有关单例的概念限于Spring上下文的范围内，不像真正的单例，在每个类加载器中保证只有一个实例。</p>
<h3 id="Bean__u7684_u751F_u547D_u5468_u671F"><a href="#Bean__u7684_u751F_u547D_u5468_u671F" class="headerlink" title="Bean 的生命周期"></a>Bean 的生命周期</h3><p>初始化和销毁，可以配置 init-method 和 destory-method，虽然Spring API也提供相应的接口，但会与其产生耦合。</p>
<p>在Java中singleton包含两个概念：单个实例的对象，单例模式。前者用singleton表示，后者用Singleton表示。<br>可以通过配置文件中的配置来修改“单例”的属性。<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">package com.apress.prospring4.ch3;&#10;public class Singleton &#123;&#10;    private static Singleton instance;&#10;    static &#123;&#10;        instance = new Singleton();&#10;&#125;&#10;    public static Singleton getInstance() &#123;&#10;        return instance;&#10;&#125; &#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="u4E3ABean_u7684_u5C5E_u6027_u548C_u6784_u9020_u5668_u53C2_u6570_u88C5_u914D_u591A_u79CD_u7C7B_u578B_u7684_u503C"><a href="#u4E3ABean_u7684_u5C5E_u6027_u548C_u6784_u9020_u5668_u53C2_u6570_u88C5_u914D_u591A_u79CD_u7C7B_u578B_u7684_u503C" class="headerlink" title="为Bean的属性和构造器参数装配多种类型的值"></a>为Bean的属性和构造器参数装配多种类型的值</h2><ul>
<li>简单属性值，使用value属性</li>
<li>引用其他Bean的属性，使用ref属性</li>
<li>Bean的属性是复数，比如集合，使用list set map props属性<ul>
<li></li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">bean</span> <span class="attribute">id</span>=<span class="value">"hank"</span></span><br><span class="line">            <span class="attribute">class</span>=<span class="value">"com.springinaction.springido1.OneManBand"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"instruments"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">ref</span> <span class="attribute">bean</span>=<span class="value">"guitar"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">ref</span> <span class="attribute">bean</span>=<span class="value">"cymbal"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">ref</span> <span class="attribute">bean</span>=<span class="value">"harmonica"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="u7591_u95EE_uFF1F"><a href="#u7591_u95EE_uFF1F" class="headerlink" title="疑问？"></a>疑问？</h2><p>从《Spring in Action》中可以看到注入Bean属性实则就是setter方法注入，这种方式在setter方法上有@Autowired注解。那在属性上直接写@Autowired又是什么注入方式呢。</p>
<h2 id="u5982_u4F55_u51CF_u5C11XML_u7684_u914D_u7F6E_u6570_u91CF"><a href="#u5982_u4F55_u51CF_u5C11XML_u7684_u914D_u7F6E_u6570_u91CF" class="headerlink" title="如何减少XML的配置数量"></a>如何减少XML的配置数量</h2><p>Spring提供了以下方式：</p>
<ul>
<li>自动装配 autowiring，减少甚至消除配置<property> <constructor-arg>元素，让Spring自动识别并装配Bean的依赖关系</constructor-arg></property></li>
<li>自动检测 autodiscovery，比自动装配更进一步，让Spring自动识别哪些类需要被配置成Spring Bean，减少对<bean>元素的使用。</bean></li>
</ul>
<h3 id="u81EA_u52A8_u88C5_u914DAutowiring_Bean__u5C5E_u6027"><a href="#u81EA_u52A8_u88C5_u914DAutowiring_Bean__u5C5E_u6027" class="headerlink" title="自动装配Autowiring Bean 属性"></a>自动装配Autowiring Bean 属性</h3><p>Spring提供了4种自动装配策略：</p>
<ul>
<li>byName，把与Bean的属性具有相同名字的其他Bean自动装配到Bean的对应属性中</li>
<li>byType，把与Bean的属性具有相同类型的其他Bean自动装配到Bean的对应属性中</li>
<li>constructor，把与Bean的构造器入参具有相同类型的其他Bean自动装配到Bean构造器的对应入参中</li>
<li>autodetect，首先尝试使用constructor进行自动装配，如果失败，再尝试使用byType进行自动装配</li>
</ul>
<h4 id="u4F7F_u7528_u6CE8_u89E3_u81EA_u52A8_u88C5_u914DBean__u5C5E_u6027"><a href="#u4F7F_u7528_u6CE8_u89E3_u81EA_u52A8_u88C5_u914DBean__u5C5E_u6027" class="headerlink" title="使用注解自动装配Bean 属性"></a>使用注解自动装配Bean 属性</h4><p>Spring容器默认禁用注解装配，所以在使用基于注解的自动装配前，我们需要在Spring配置中启用它。最简单的启用方式是使用：</p>
<context:annotation-config>

<p>这会告诉Spring我们打算使用基于注解的自动装配。</p>
<p>Spring 3 支持几种不同的用于自动装配的注解：</p>
<ul>
<li>Spring自带的 @Autowired 注解，这种方式下如果没有Bean可以装配到@Autowired所标注的属性或参数中，或者有多个Bean的时候，都会得到“NoSuchBeanDefinitionException”的异常<ul>
<li>可以标注Setter方法</li>
<li>可以标注构造器</li>
<li>可以标注属性，并删除setter方法</li>
</ul>
</li>
<li>JSR-330 的 @Inject 注解<ul>
<li>为了统一各种依赖注入框架的编程模型，JCP（Java Community Process）发布了Java依赖注入规范，JCP将其称为JSR-330，更常见的叫法是 at inject，该规范为Java带来了通用依赖注入模型。</li>
<li>@Inject 注解是JSR-330的核心部件，几乎可以完全替换Spring的 @Autowired 注解。</li>
<li>和 @Autowired 一样，@Inject 可以用来自动装配属性、方法和构造器</li>
<li>不一样的是，@Inject 没有 required 属性。因此 @Inject 注解所标注的依赖关系必须存在，如果不存在，则会抛出异常。</li>
<li>@Inject 可以注入一个provider</li>
</ul>
</li>
<li>JSR-250 的 @Resource 注解</li>
</ul>
<h3 id="u81EA_u52A8_u68C0_u6D4B_Bean"><a href="#u81EA_u52A8_u68C0_u6D4B_Bean" class="headerlink" title="自动检测 Bean"></a>自动检测 Bean</h3><p>我们希望使用<context:annotation-config>之后，Spring能对待我们定义的注解，并指导Bean的装配。<br>即使<context:annotation-config>有助于完全消除Spring配置中的<property> <constructor-arg>元素，我们仍需要使用<bean>元素显示定义Bean。</bean></constructor-arg></property></context:annotation-config></context:annotation-config></p>
<p>在Spring中<context:component-scan>除了完成<context:annotation-config>的工作，还允许Spring自动检测Bean和定义Bean。</context:annotation-config></context:component-scan></p>
<p>为了配置Spring自动检测，需要使用<context:component-scan>元素来代替<context:annotation-config>元素。</context:annotation-config></context:component-scan></p>
<h4 id="u5982_u4F55_u77E5_u9053_u54EA_u4E9B_u7C7B_u9700_u8981_u6CE8_u518C_u4E3ASpring_Bean_uFF1F"><a href="#u5982_u4F55_u77E5_u9053_u54EA_u4E9B_u7C7B_u9700_u8981_u6CE8_u518C_u4E3ASpring_Bean_uFF1F" class="headerlink" title="如何知道哪些类需要注册为Spring Bean？"></a><context:component-scan> 如何知道哪些类需要注册为Spring Bean？</context:component-scan></h4><p>默认情况下，<context:component-scan> 查找使用构造型（stereotype）注解所标注的类：</context:component-scan></p>
<ul>
<li>@Component，通用的构造型注解，标识该类为Spring组件</li>
<li>@Controller，标识将该类定义为Spring MVC Controller</li>
<li>@Repository，标识将该类定义为数据仓库</li>
<li>@Service，标识将该类定义为服务</li>
<li>使用 @Component 标注的任意自定义注解</li>
</ul>
<p>当使用 <context:component-scan> 时，基于注解地自动检测只是一种扫描策略，还有其他扫描策略。</context:component-scan></p>
<ul>
<li>过滤组件扫描，比如 <context:include-filter></context:include-filter></li>
</ul>
<h2 id="u5982_u679C_u4E0D_u559C_u6B22XML_uFF0C_u53EF_u4EE5_u4F7F_u7528Spring_u521B_u5EFA_u57FA_u4E8EJava_u7684_u914D_u7F6E"><a href="#u5982_u679C_u4E0D_u559C_u6B22XML_uFF0C_u53EF_u4EE5_u4F7F_u7528Spring_u521B_u5EFA_u57FA_u4E8EJava_u7684_u914D_u7F6E" class="headerlink" title="如果不喜欢XML，可以使用Spring创建基于Java的配置"></a>如果不喜欢XML，可以使用Spring创建基于Java的配置</h2><p>仍然需要少量的XML来启用Java配置，在下面代码中，base-package告诉Spring在哪个包中查找使用@Configuration注解所标注的所有类：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">beans</span> <span class="attribute">xmlns</span>=<span class="value">"http://www.springframework.org/schema/beans"</span></span><br><span class="line">       <span class="attribute">xmlns:xsi</span>=<span class="value">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">       <span class="attribute">xmlns:context</span>=<span class="value">"http://www.springframework.org/schema/context"</span></span><br><span class="line">       <span class="attribute">xsi:schemaLocation</span>=<span class="value">"http://www.springframework.org/schema/beans</span><br><span class="line">          http://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">          http://www.springframework.org/schema/context</span><br><span class="line">          http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">context:component-scan</span></span><br><span class="line">          <span class="attribute">base-package</span>=<span class="value">"com.springinactin.springido1"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="u5B9A_u4E49_u4E00_u4E2A_u914D_u7F6E_u7C7B"><a href="#u5B9A_u4E49_u4E00_u4E2A_u914D_u7F6E_u7C7B" class="headerlink" title="定义一个配置类"></a>定义一个配置类</h3><p>使用@Configuration注解的Java类，等价于XML配置中的<beans>元素。<br>@Configuration注解会告诉Spring，这个类将包含一个或多个Spring Bean的定义。</beans></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="annotation">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> Class SpringIdo1Config &#123;</span><br><span class="line">    <span class="comment">// Bean declaration methods go here</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</context:annotation-config>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://weixiaobo88.github.io/2015/07/14/2015-07-14-spring-003-config/" data-id="cijms6q8q0009koqfqwpantol" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2015-07-12-spring-002-ioc" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/12/2015-07-12-spring-002-ioc/" class="article-date">
  <time datetime="2015-07-12T10:08:50.000Z" itemprop="datePublished">2015-07-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/12/2015-07-12-spring-002-ioc/">开始学习Spring</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Spring_4_IoC"><a href="#Spring_4_IoC" class="headerlink" title="Spring 4 IoC"></a>Spring 4 IoC</h2><p>Spring 4.0.2 有20个modules，打包成20个jar文件</p>
<p>任何一个有实际意义的应用都是由两个或者更多的类组成，这些类相互之间进行协作来完成特定的业务逻辑。通常，每个对象负责管理与自己相互协作的对象（即它所以来的对象）的引用，这将会导致高度耦合和难以测试的代码。</p>
<p>通过依赖注入，对象的依赖关系将由负责协调系统中各个对象的第三方组件在创建对象时设定。对象无需自行创建或管理它们的依赖关系——依赖关系将被自动注入到需要它们的对象中去。</p>
<h2 id="u63A7_u5236_u53CD_u8F6C"><a href="#u63A7_u5236_u53CD_u8F6C" class="headerlink" title="控制反转"></a>控制反转</h2><p>一个需要特定依赖的组件，我们称为依赖对象dependent object，或者在IoC中称为目标target。</p>
<p>通常来讲， IoC有两种类型：</p>
<ul>
<li>Dependency Lookup <ul>
<li>Dependency Pull 依赖拖拽，组件之间的依赖关系是根据需要，从一个集中的“仓库”中获取的。</li>
<li>Contextualized Dependency Lookup (CDL) 上下文配置依赖查找，在当前运行的容器所管理的资源中进行查找。</li>
</ul>
</li>
<li>Dependency Injection <ul>
<li>Constructor 构造函数依赖注入</li>
<li>Setter Dependency Injection setter方法依赖注入</li>
</ul>
</li>
</ul>
<p>依赖注入的真正价值在于把相互协作的对象装配在一起，而不需要这些对象自己负责装配。<br>Spring提倡面向接口编程，面向接口编程与依赖注入协作实现了松散耦合。</p>
<h3 id="u6CE8_u5165_vs-__u67E5_u627E"><a href="#u6CE8_u5165_vs-__u67E5_u627E" class="headerlink" title="注入 vs. 查找"></a>注入 vs. 查找</h3><ul>
<li>查找，应用必须依赖于特定容器的特定类或者接口，程序就与特定的容器想耦合，移植性大打折扣</li>
<li>注入，不用手工配置查找的代码，组件之间的灵活性高，不需要主动调用相应的魔豆，对象都会保存在同一的地方</li>
</ul>
<h3 id="setter_u6CE8_u5165_vs-__u6784_u9020_u5668_u6CE8_u5165"><a href="#setter_u6CE8_u5165_vs-__u6784_u9020_u5668_u6CE8_u5165" class="headerlink" title="setter注入 vs. 构造器注入"></a>setter注入 vs. 构造器注入</h3><ul>
<li>构造函数注入，应用在要使用组件之前就必须要实例化被依赖的组件的情况下。</li>
<li>setter注入，应用在组件本身对容器暴露自身的依赖关系，并且愿意提供一个默认的依赖关系的情况下。</li>
</ul>
<h2 id="Spring_u4E2D_u7684IoC"><a href="#Spring_u4E2D_u7684IoC" class="headerlink" title="Spring中的IoC"></a>Spring中的IoC</h2><p>在基于Spring的应用中，偏向使用依赖注入而不是查找，但是对于独立对象的访问，怡然需要通过查找来获取合作关系。<br>Spring还不能自动将应用程序组件通过依赖注入连接起来，因此必须通过依赖查找来初始化组件集合。</p>
<p>使用Spring MVC来构建Web应用的时候，反而不会遇到这种麻烦事，Spring此时就像一个粘合剂，很好的粘合了应用的各个部分。</p>
<p>Spring IoC体现在：</p>
<ul>
<li>Setter注入</li>
<li>Constructor注入</li>
<li>Method注入</li>
<li>autowiring</li>
<li>bean inheritance</li>
</ul>
<h2 id="Spring_u4E2D_u7684DI"><a href="#Spring_u4E2D_u7684DI" class="headerlink" title="Spring中的DI"></a>Spring中的DI</h2><p>Spring DI 容器的核心是 BeanFactory 接口</p>
<p>要做两件事：</p>
<ul>
<li>在程序中使用BeanFactory</li>
<li>配置BeanFactory</li>
</ul>
<p>在Spring中，ApplicationContext接口是BeanFactory的扩展，ApplicationContext除了提供DI服务之外，还有其他，比如事务、AOP、事件处理等。</p>
<p>在开发过程中，推荐使用ApplicationContext与Spring进行交互。</p>
<h3 id="u914D_u7F6EApplicationContext"><a href="#u914D_u7F6EApplicationContext" class="headerlink" title="配置ApplicationContext"></a>配置ApplicationContext</h3><p>定义beans的方式：</p>
<ul>
<li>properties</li>
<li>XML文件<ul>
<li>配置文件在Java code之外</li>
</ul>
</li>
<li>Java annotations (始于Spring 2.5)<ul>
<li>运行开发人员定义和查看DI setup</li>
</ul>
</li>
</ul>
<p>Spring也支持在同一个ApplicationContext中采用XML文件和annotation的混合配置方式。<br>一种通用的方式是在XML文件中定义应用的基础设施（比如，data source，transaction manager，JMS connection factory，JMX），<br>使用annotation来定义DI配置（注入的bean和bean的依赖）</p>
<h4 id="XML_u6587_u4EF6_u914D_u7F6E_u65B9_u5F0F"><a href="#XML_u6587_u4EF6_u914D_u7F6E_u65B9_u5F0F" class="headerlink" title="XML文件配置方式"></a>XML文件配置方式</h4><p>需要声明所需要的Spring命名空间beans</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">样例 app-context-xml.xml</span><br><span class="line"></span><br><span class="line">    <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">beans</span> <span class="attribute">xmlns</span>=<span class="value">"http://www.springframework.org/schema/beans"</span></span><br><span class="line">        <span class="attribute">xmlns:xsi</span>=<span class="value">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">        <span class="attribute">xsi:schemaLocation</span>=<span class="value">"http://www.springframework.org/schema/beans</span><br><span class="line">            http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">bean</span> <span class="attribute">id</span>=<span class="value">"messageProvider"</span></span><br><span class="line">              <span class="attribute">class</span>=<span class="value">"com.apress.prospring4.ch3.xml.HelloWorldMessageProvider"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="annotation_u914D_u7F6E_u65B9_u5F0F"><a href="#annotation_u914D_u7F6E_u65B9_u5F0F" class="headerlink" title="annotation配置方式"></a>annotation配置方式</h4><p>需要在XML文件中声明tags</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">样例 app-context-annotation.xml</span><br><span class="line"></span><br><span class="line">    <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">beans</span> <span class="attribute">xmlns</span>=<span class="value">"http://www.springframework.org/schema/beans"</span></span><br><span class="line">        <span class="attribute">xmlns:xsi</span>=<span class="value">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">        <span class="attribute">xmlns:context</span>=<span class="value">"http://www.springframework.org/schema/context"</span></span><br><span class="line">        <span class="attribute">xsi:schemaLocation</span>=<span class="value">"http://www.springframework.org/schema/beans</span><br><span class="line">            http://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">            http://www.springframework.org/schema/context</span><br><span class="line">            http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">context:component-scan</span> <span class="attribute">base-package</span>=<span class="value">"com.apress.prospring4.ch3.annotation"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><context:component-scan> 标签告诉Spring在所配置的包中扫描注入的beans，这些bean通过注解 @Component, @Controller, @Repository, and @Service， @Autowired and @Inject标明。<br>在<context:component-scan> 标签中可以定义多个packages，使用逗号、分号或空格来分隔开。该标签还可以指定包含或排除某个component。</context:component-scan></context:component-scan></p>
<h3 id="u4F7F_u7528XML_u5B9E_u73B0Setter_u6CE8_u5165"><a href="#u4F7F_u7528XML_u5B9E_u73B0Setter_u6CE8_u5165" class="headerlink" title="使用XML实现Setter注入"></a>使用XML实现Setter注入</h3><p>使用XML来配置Setter注入，需要在<bean>下配置一个<property>的标签，每个<property>表示一个要注入的依赖。</property></property></bean></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">beans</span> <span class="attribute">xmlns</span>=<span class="value">"http://www.springframework.org/schema/beans"</span></span><br><span class="line">       <span class="attribute">xmlns:xsi</span>=<span class="value">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">       <span class="attribute">xsi:schemaLocation</span>=<span class="value">"http://www.springframework.org/schema/beans</span><br><span class="line">          http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">bean</span> <span class="attribute">id</span>=<span class="value">"messageRenderer"</span></span><br><span class="line">        <span class="attribute">class</span>=<span class="value">"com.apress.prospring4.ch3.xml.StandardOutMessageRenderer"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"messageProvider"</span> <span class="attribute">ref</span>=<span class="value">"messageProvider"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">bean</span>&gt;</span></span><br><span class="line">    或者可以用“p”的命名空间</span><br><span class="line">    <span class="tag">&lt;<span class="title">bean</span> <span class="attribute">id</span>=<span class="value">"messageRenderer"</span></span><br><span class="line">        <span class="attribute">class</span>=<span class="value">"com.apress.prospring4.ch3.xml.StandardOutMessageRenderer"</span></span><br><span class="line">        <span class="attribute">p:messageProvider-ref</span>=<span class="value">"messageProvider"</span>/&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;<span class="title">bean</span> <span class="attribute">id</span>=<span class="value">"messageProvider"</span></span><br><span class="line">        <span class="attribute">class</span>=<span class="value">"com.apress.prospring4.ch3.xml.HelloWorldMessageProvider"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>命名空间“p”没有定义在XSD文件中，只存在于Spring core中，所以在schemaLocation属性中没有对于的XSD。</p>
<h3 id="u4F7F_u7528annotation_u5B9E_u73B0setter_u6CE8_u5165"><a href="#u4F7F_u7528annotation_u5B9E_u73B0setter_u6CE8_u5165" class="headerlink" title="使用annotation实现setter注入"></a>使用annotation实现setter注入</h3><p>只需要添加@Autowired</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="annotation">@Service</span>(<span class="string">"messageRenderer"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StandardOutMessageRenderer</span> <span class="keyword">implements</span> <span class="title">MessageRenderer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> MessageProvider messageProvider;</span><br><span class="line">    </span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="annotation">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMessageProvider</span><span class="params">(MessageProvider provider)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.messageProvider = provider;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在XMl文件中配置了 <context:component-scan> ，在Spring的ApplicationContext初始化的时候，会找到所有的@Autowired的annotation，并注入所需的依赖。</context:component-scan></p>
<h3 id="u4F7F_u7528XML_u6765_u914D_u7F6E_u6784_u9020_u51FD_u6570_u6CE8_u5165"><a href="#u4F7F_u7528XML_u6765_u914D_u7F6E_u6784_u9020_u51FD_u6570_u6CE8_u5165" class="headerlink" title="使用XML来配置构造函数注入"></a>使用XML来配置构造函数注入</h3><p>在XML文件中使用<constructor-arg>，同时采用value的属性为构造函数传递参数。如果参数多于一个，可以使用index属性来指定参数的顺序。<br>同时也可以使用命名空间“c”来代替。“c”也是只存在于Spring core中。</constructor-arg></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">beans</span> <span class="attribute">xmlns</span>=<span class="value">"http://www.springframework.org/schema/beans"</span></span><br><span class="line">       <span class="attribute">xmlns:xsi</span>=<span class="value">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">       <span class="attribute">xsi:schemaLocation</span>=<span class="value">"http://www.springframework.org/schema/beans</span><br><span class="line">          http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">bean</span> <span class="attribute">id</span>=<span class="value">"messageProvider"</span></span><br><span class="line">        <span class="attribute">class</span>=<span class="value">"com.apress.prospring4.ch3.xml.ConfigurableMessageProvider"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">constructor-arg</span> <span class="attribute">value</span>=<span class="value">"Configurable message"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">bean</span>&gt;</span></span><br><span class="line">    或者</span><br><span class="line">    <span class="tag">&lt;<span class="title">bean</span> <span class="attribute">id</span>=<span class="value">"messageProvider"</span></span><br><span class="line">        <span class="attribute">class</span>=<span class="value">"com.apress.prospring4.ch3.xml.ConfigurableMessageProvider"</span></span><br><span class="line">        <span class="attribute">c:message</span>=<span class="value">"This is a configurable message"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果需要传递的参数是整型的话，需要指明类型：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">bean</span> <span class="attribute">id</span>=<span class="value">"constructorConfusion"</span></span><br><span class="line">        <span class="attribute">class</span>=<span class="value">"com.apress.prospring4.ch3.xml.ConstructorConfusion"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">constructor-arg</span> <span class="attribute">type</span>=<span class="value">”int”</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">value</span>&gt;</span>90<span class="tag">&lt;/<span class="title">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="u4F7F_u7528annotation_u6765_u914D_u7F6E_u6784_u9020_u51FD_u6570_u6CE8_u5165"><a href="#u4F7F_u7528annotation_u6765_u914D_u7F6E_u6784_u9020_u51FD_u6570_u6CE8_u5165" class="headerlink" title="使用annotation来配置构造函数注入"></a>使用annotation来配置构造函数注入</h3><p>在构造函数上声明@Autowired。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">beans</span> <span class="attribute">xmlns</span>=<span class="value">"http://www.springframework.org/schema/beans"</span></span><br><span class="line">       <span class="attribute">xmlns:xsi</span>=<span class="value">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">       <span class="attribute">xmlns:context</span>=<span class="value">"http://www.springframework.org/schema/context"</span></span><br><span class="line">       <span class="attribute">xmlns:c</span>=<span class="value">"http://www.springframework.org/schema/c"</span></span><br><span class="line">       <span class="attribute">xsi:schemaLocation</span>=<span class="value">"http://www.springframework.org/schema/beans</span><br><span class="line">          http://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">          http://www.springframework.org/schema/context</span><br><span class="line">          http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">context:component-scan</span></span><br><span class="line">          <span class="attribute">base-package</span>=<span class="value">"com.apress.prospring4.ch3.annotation"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">bean</span> <span class="attribute">id</span>=<span class="value">"message"</span> <span class="attribute">class</span>=<span class="value">"java.lang.String"</span> <span class="attribute">c:_0</span>=<span class="value">"This is a configurable message"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="u53C2_u6570_u6CE8_u5165"><a href="#u53C2_u6570_u6CE8_u5165" class="headerlink" title="参数注入"></a>参数注入</h3><h4 id="u7B80_u5355_u7C7B_u578B_u7684_u503C"><a href="#u7B80_u5355_u7C7B_u578B_u7684_u503C" class="headerlink" title="简单类型的值"></a>简单类型的值</h4><h3 id="u65B9_u6CD5_u6CE8_u5165"><a href="#u65B9_u6CD5_u6CE8_u5165" class="headerlink" title="方法注入"></a>方法注入</h3><h2 id="u53C2_u8003_u8D44_u6599"><a href="#u53C2_u8003_u8D44_u6599" class="headerlink" title="参考资料"></a>参考资料</h2><p>《Pro Spring 4 Edition》</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://weixiaobo88.github.io/2015/07/12/2015-07-12-spring-002-ioc/" data-id="cijms6q8r000akoqf9d9g0cno" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spring/">spring</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2015-07-10-backend-frontend-interaction" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/10/2015-07-10-backend-frontend-interaction/" class="article-date">
  <time datetime="2015-07-10T10:08:50.000Z" itemprop="datePublished">2015-07-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/10/2015-07-10-backend-frontend-interaction/">后台数据传到前台有几种方式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#后台数据传到前台有几种方式</p>
<ul>
<li>Servlet + JSP</li>
<li>MVC</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://weixiaobo88.github.io/2015/07/10/2015-07-10-backend-frontend-interaction/" data-id="cijms6q8w000dkoqfnlqrqanc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2015-07-10-database-01" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/10/2015-07-10-database-01/" class="article-date">
  <time datetime="2015-07-10T10:08:50.000Z" itemprop="datePublished">2015-07-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/10/2015-07-10-database-01/">数据库</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>数据库<br>实体<br>实体之间的关系</p>
<p>修改数据库表的字段类型，如果已有的数据类型不同，会怎么样</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://weixiaobo88.github.io/2015/07/10/2015-07-10-database-01/" data-id="cijms6q8u000ckoqfx7tbznjh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/functional-programming/">functional-programming</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gradle/">gradle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/servlet/">servlet</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/">spring</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/functional-programming/" style="font-size: 10px;">functional-programming</a> <a href="/tags/gradle/" style="font-size: 10px;">gradle</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/servlet/" style="font-size: 15px;">servlet</a> <a href="/tags/spring/" style="font-size: 20px;">spring</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/01/18/20160118-functional-programming-monad/">Monad</a>
          </li>
        
          <li>
            <a href="/2016/01/18/2013-12-31-whats-jekyll/">What&#39;s Jekyll?</a>
          </li>
        
          <li>
            <a href="/2015/08/04/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2015/08/04/2015-03-19-webfont/">学习web fonts</a>
          </li>
        
          <li>
            <a href="/2015/08/03/test/">test</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Linne<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>