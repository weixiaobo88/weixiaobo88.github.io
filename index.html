<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>weixiaobo88.github.io</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="weixiaobo88.github.io">
<meta property="og:url" content="http://weixiaobo88.github.io/index.html">
<meta property="og:site_name" content="weixiaobo88.github.io">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="weixiaobo88.github.io">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="weixiaobo88.github.io" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">weixiaobo88.github.io</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Just do it !</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://weixiaobo88.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-20160122-bind-in-javascript-md" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/22/20160122-bind-in-javascript-md/" class="article-date">
  <time datetime="2016-01-22T14:19:32.000Z" itemprop="datePublished">2016-01-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/22/20160122-bind-in-javascript-md/">Bind in JavaScript</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>参考<br><a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_objects/Function/bind" target="_blank" rel="external">Bind MDN</a><br><a href="http://stackoverflow.com/questions/15455009/javascript-call-apply-vs-bind" target="_blank" rel="external">StackOverflow</a> </p>
<h2 id="bind__u51FD_u6570_u8BED_u6CD5"><a href="#bind__u51FD_u6570_u8BED_u6CD5" class="headerlink" title="bind 函数语法"></a>bind 函数语法</h2><p><code>fun.bind(thisArg[, arg1[, arg2[, ...]]])</code></p>
<p>其中:</p>
<ul>
<li>fun 是;</li>
<li>bind 是关键字</li>
<li>thisArg 是你想绑定的 target</li>
<li>arg1, arg2 … 是绑定到 thisArg 上的 fun 方法的参数</li>
</ul>
<h2 id="bind__u51FD_u6570_u662F_u4EC0_u4E48"><a href="#bind__u51FD_u6570_u662F_u4EC0_u4E48" class="headerlink" title="bind 函数是什么"></a>bind 函数是什么</h2><p>bind() 函数会创建一个新函数（称为绑定函数），新函数与被调函数（绑定函数的目标函数）具有相同的函数体。<br>当目标函数被调用时 this 值绑定到 bind() 的第一个参数，该参数不能被重写。<br>绑定函数被调用时，bind() 也接受预设的参数提供给原函数。</p>
<h2 id="bind__u51FD_u6570_u548C_call__u6709_u4EC0_u4E48_u533A_u522B"><a href="#bind__u51FD_u6570_u548C_call__u6709_u4EC0_u4E48_u533A_u522B" class="headerlink" title="bind 函数和 call 有什么区别"></a>bind 函数和 call 有什么区别</h2><p>They all attach this into function (or object) and the difference is in the function invocation (see below).</p>
<p>call attaches this into function and executes the function immediately:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;  </span><br><span class="line">  name: <span class="string">"James Smith"</span>,</span><br><span class="line">  hello: <span class="function"><span class="keyword">function</span>(<span class="params">thing</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">" says hello "</span> + thing);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">person.hello.call(person, <span class="string">"world"</span>); <span class="comment">// output: James Smith says hello world</span></span><br></pre></td></tr></table></figure>
<p>bind attaches this into function and it needs to be invoked separately like this:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;  </span><br><span class="line">  name: <span class="string">"James Smith"</span>,</span><br><span class="line">  hello: <span class="function"><span class="keyword">function</span>(<span class="params">thing</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">" says hello "</span> + thing);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> helloFunc = person.hello.bind(person);</span><br><span class="line">helloFunc(<span class="string">"world"</span>);  <span class="comment">// output: James Smith says hello world</span></span><br></pre></td></tr></table></figure>
<p>or like this:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable"><span class="keyword">var</span> helloFunc</span> = person.hello.bind(person, <span class="string">"world"</span>);</span><br><span class="line">helloFunc();  <span class="comment">// output: James Smith says hello world</span></span><br></pre></td></tr></table></figure>
<h2 id="bind__u51FD_u6570_u5728_u4EC0_u4E48_u60C5_u51B5_u4E0B_u7528"><a href="#bind__u51FD_u6570_u5728_u4EC0_u4E48_u60C5_u51B5_u4E0B_u7528" class="headerlink" title="bind 函数在什么情况下用"></a>bind 函数在什么情况下用</h2><ul>
<li>设定某个函数调用的 this  值</li>
<li>预设初始参数</li>
<li>callback 中传递 this</li>
<li>快捷调用</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://weixiaobo88.github.io/2016/01/22/20160122-bind-in-javascript-md/" data-id="cijptqmdm000iacjeie9nhad2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bind/">bind</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-20160121-npm-package-file-md" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/21/20160121-npm-package-file-md/" class="article-date">
  <time datetime="2016-01-21T13:41:04.000Z" itemprop="datePublished">2016-01-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/21/20160121-npm-package-file-md/">20160121-npm-package-file.md</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="package-json_u6587_u4EF6"><a href="#package-json_u6587_u4EF6" class="headerlink" title="package.json文件"></a><code>package.json</code>文件</h2><p>这个文件必须是 JSON 文件.</p>
<h3 id="main_field"><a href="#main_field" class="headerlink" title="main field"></a><code>main</code> field</h3><p><code>main</code>是程序的主要入口点, 是一个 module 的 ID. </p>
<ul>
<li>默认情况下是相对于包所在文件夹的根目录.</li>
<li>也有可能是作为 main script.</li>
</ul>
<p>举个例子, 如果你的包名为 <code>foo</code>, 当用户安装这个包之后, 可以使用 <code>require(&#39;foo&#39;)</code>.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://weixiaobo88.github.io/2016/01/21/20160121-npm-package-file-md/" data-id="cijptqmdp000lacjeyertuf4q" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/npm-package-json/">npm, package.json</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-20160118-functional-programming-monad" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/18/20160118-functional-programming-monad/" class="article-date">
  <time datetime="2016-01-18T12:18:14.000Z" itemprop="datePublished">2016-01-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/18/20160118-functional-programming-monad/">Monad</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>参考: </p>
<ul>
<li><a href="http://www.ruanyifeng.com/blog/2015/07/monad.html?utm_source=tuicool" target="_blank" rel="external">图解 Monad</a></li>
<li><a href="https://en.wikipedia.org/wiki/Monad_%28functional_programming%29" target="_blank" rel="external">Monad Wiki</a></li>
</ul>
<p>软件的基本结构就是数据+过程</p>
<p>数据: 数据类型<br>过程: 顺序, 分支, 循环</p>
<p>值函数: 处理值的函数</p>
<h2 id="Monad__u662F_u4EC0_u4E48"><a href="#Monad__u662F_u4EC0_u4E48" class="headerlink" title="Monad 是什么"></a>Monad 是什么</h2><p>Monad 是一个描绘了一系列计算步骤的结构, 其中这个结构的 type 定义了如何把操作链起来, 或者把那个 type 的函数嵌套起来<br>表示将一个运算过程，通过函数拆解成互相连接的多个步骤。<br>你只要提供下一步运算所需的函数，整个运算就会自动进行下去。</p>
<h2 id="u4E3A_u4EC0_u4E48_u4F1A_u6709_Monad_2C__u5B83_u7684_u51FA_u73B0_u89E3_u51B3_u4E86_u4EC0_u4E48_u95EE_u9898"><a href="#u4E3A_u4EC0_u4E48_u4F1A_u6709_Monad_2C__u5B83_u7684_u51FA_u73B0_u89E3_u51B3_u4E86_u4EC0_u4E48_u95EE_u9898" class="headerlink" title="为什么会有 Monad, 它的出现解决了什么问题"></a>为什么会有 Monad, 它的出现解决了什么问题</h2><h2 id="Monad__u6709_u4EC0_u4E48_u7528"><a href="#Monad__u6709_u4EC0_u4E48_u7528" class="headerlink" title="Monad 有什么用"></a>Monad 有什么用</h2><h2 id="Monad__u5982_u4F55_u7528_u8D77_u6765"><a href="#Monad__u5982_u4F55_u7528_u8D77_u6765" class="headerlink" title="Monad 如何用起来"></a>Monad 如何用起来</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://weixiaobo88.github.io/2016/01/18/20160118-functional-programming-monad/" data-id="cijptqmdr000oacje0qq8r2el" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/">functional-programming</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-20160114-functional-programming" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/14/20160114-functional-programming/" class="article-date">
  <time datetime="2016-01-14T13:09:36.000Z" itemprop="datePublished">2016-01-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/14/20160114-functional-programming/">Functional Programming</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>参考: <a href="http://www.ruanyifeng.com/blog/2012/04/functional_programming.html" target="_blank" rel="external">函数式编程初探</a></p>
<h2 id="u4EC0_u4E48_u662F_u51FD_u6570_u5F0F_u7F16_u7A0B"><a href="#u4EC0_u4E48_u662F_u51FD_u6570_u5F0F_u7F16_u7A0B" class="headerlink" title="什么是函数式编程"></a>什么是函数式编程</h2><p>函数式编程是一种”编程范式”, 属于”结构化编程”的一种, 主要思想是把运算过程写成一系列嵌套的函数调用.</p>
<h2 id="u51FD_u6570_u5F0F_u7F16_u7A0B_u6709_u4EC0_u4E48_u7279_u70B9"><a href="#u51FD_u6570_u5F0F_u7F16_u7A0B_u6709_u4EC0_u4E48_u7279_u70B9" class="headerlink" title="函数式编程有什么特点"></a>函数式编程有什么特点</h2><p>五个特点:</p>
<ul>
<li>函数是”第一等公民”<ul>
<li>可以赋值给其他变量</li>
<li>可以作为参数</li>
<li>可以作为返回值</li>
</ul>
</li>
<li>只用”表达式”，不用”语句”<ul>
<li>表达式就是一个运算过程, 总有返回值</li>
<li>语句是执行某种操作, 没有返回值</li>
</ul>
</li>
<li>没有”副作用”<ul>
<li>所谓”副作用”, 指的是函数内部与外部互动（最典型的情况，就是修改全局变量的值）, 产生运算以外的其他结果。</li>
<li>函数式编程不会修改外部变量的值</li>
</ul>
</li>
<li>不修改状态<ul>
<li>只返回新的值, 不修改系统变量</li>
</ul>
</li>
<li>引用透明<ul>
<li>函数运行只依赖于参数, 只要参数相同, 返回值总是相同</li>
</ul>
</li>
</ul>
<h2 id="u51FD_u6570_u5F0F_u7F16_u7A0B_u80FD_u5E26_u6765_u4EC0_u4E48_u597D_u5904"><a href="#u51FD_u6570_u5F0F_u7F16_u7A0B_u80FD_u5E26_u6765_u4EC0_u4E48_u597D_u5904" class="headerlink" title="函数式编程能带来什么好处"></a>函数式编程能带来什么好处</h2><ul>
<li>代码简洁，开发快速<ul>
<li>函数式编程大量使用函数, 减少了代码重复</li>
</ul>
</li>
<li>接近自然语言，易于理解</li>
<li>更方便的代码管理<ul>
<li>函数式编程只要给定输入参数, 返回的结果必定相同</li>
<li>因此，每一个函数都可以被看做独立单元, 很有利于进行单元测试和除错, 以及模块化组合</li>
</ul>
</li>
<li>易于”并发编程”</li>
<li>代码的热升级</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://weixiaobo88.github.io/2016/01/14/20160114-functional-programming/" data-id="cijptqmdu000racjetfyvat43" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/">functional-programming</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-20160112-React-Bootstrap-Introduction" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/12/20160112-React-Bootstrap-Introduction/" class="article-date">
  <time datetime="2016-01-12T12:21:38.000Z" itemprop="datePublished">2016-01-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/12/20160112-React-Bootstrap-Introduction/">React-Bootstrap-Introduction</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="u4ECB_u7ECD__u2014_u2014__u4F7F_u7528React_u91CD_u5EFA_u6700_u53D7_u6B22_u8FCE_u7684_u524D_u7AEF_u6846_u67B6"><a href="#u4ECB_u7ECD__u2014_u2014__u4F7F_u7528React_u91CD_u5EFA_u6700_u53D7_u6B22_u8FCE_u7684_u524D_u7AEF_u6846_u67B6" class="headerlink" title="介绍 —— 使用React重建最受欢迎的前端框架"></a>介绍 —— 使用React重建最受欢迎的前端框架</h1><p>React-Bootstrap 是一个可重用的前端组件库。用 Facebook 的 React.js<br>框架，你能构建一个和 Twitter Bootstrap 类似的库，但是代码会更整洁。</p>
<p>如果你想要一个小的 button ，button 上显示 “Something”，并能触发 someCallback<br>函数。如果你是在写一个原生的 app，你可能会像下面这样写：</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">button</span>(<span class="keyword">size</span>=SMALL, <span class="keyword">color</span>=GREEN, <span class="keyword">text</span>=<span class="string">"Something"</span>, onClick=someCallback)</span><br></pre></td></tr></table></figure>
<p>如果用 Twitter Bootstrap，你会写下面的 HTML：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">button</span> <span class="attribute">id</span>=<span class="value">"something-btn"</span> <span class="attribute">type</span>=<span class="value">"button"</span> <span class="attribute">class</span>=<span class="value">"btn btn-success btn-sm"</span>&gt;</span></span><br><span class="line">  Something</span><br><span class="line"><span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后会在 JavaScript 中写一些类似这样的代码：<br><code>$(&#39;#something-btn&#39;).click(someCallback);</code></p>
<p>从 web 的标准来看，这挺好，只是还有些不好。 React-Bootstrap 可以让你写成这样：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">Button</span> <span class="attribute">bsStyle</span>=<span class="value">"success"</span> <span class="attribute">bsSize</span>=<span class="value">"small"</span> <span class="attribute">onClick</span>=<span class="value">&#123;someCallback&#125;</span>&gt;</span></span><br><span class="line">  Something</span><br><span class="line"><span class="tag">&lt;/<span class="title">Button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>具体的 HTML/CSS<br>实现细节已经进行了抽象，提供给你的接口可以让你像其他编程语言一样来写。</p>
<h2 id="u4F7F_u7528_React-js__u7684_Bootstrap_API"><a href="#u4F7F_u7528_React-js__u7684_Bootstrap_API" class="headerlink" title="使用 React.js 的 Bootstrap API"></a>使用 React.js 的 Bootstrap API</h2><p>Bootstrap 的代码重复的很多，因为 HTML 和 CSS<br>不支持组件库的抽象。这也是为什么你需要在一个元素 <code>button</code> 中写 三次<code>btn</code>。</p>
<p>React.js 解决这个问题的方式就是直接写在 JavaScript 中。 React<br>接管了渲染页面的整个任务。你只需要把 JavaScript<br>对象树传给它即可，并且把状态告诉它。</p>
<p>举例来说，我们想让 React 渲染一个页面，只显示一个 button，并用 Bootstrap CSS<br>来给它加样式：</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var <span class="keyword">button</span> = React.DOM.<span class="keyword">button</span>(&#123;</span><br><span class="line">  className: <span class="string">'btn btn-lg btn-success'</span>,</span><br><span class="line">  children: <span class="string">'Register'</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">React.<span class="keyword">render</span>(<span class="keyword">button</span>, mountNode);</span><br></pre></td></tr></table></figure>
<p>但是现在在 JavaScript 中，我们可以包裹 HTML/CSS，然后提供一个更好的 API：</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var <span class="keyword">button</span> = ReactBootstrap.Button(&#123;</span><br><span class="line">  bsStyle: <span class="string">'success'</span>,</span><br><span class="line">  bsSize: <span class="string">'large'</span>,</span><br><span class="line">  children: <span class="string">'Register'</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">React.<span class="keyword">render</span>(<span class="keyword">button</span>, mountNode);</span><br></pre></td></tr></table></figure>
<p>React-Bootstrap 就是类似这样的组件库，你可以很容易的扩展和加强你的功能。</p>
<h2 id="JSX__u8BED_u6CD5"><a href="#JSX__u8BED_u6CD5" class="headerlink" title="JSX 语法"></a>JSX 语法</h2><p>每个 React 组件就是一个 JavaScript 对象，写成树形结构也会很烦。React 鼓励使用 JSX<br>的语法糖，你可以和像 HTML 的语法一些样来写：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var buttongGroupInstance = (</span><br><span class="line">  <span class="tag">&lt;<span class="title">ButtonGroup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">DropdownButton</span> <span class="attribute">bsStyle</span>=<span class="value">'success'</span> <span class="attribute">title</span>=<span class="value">'Dropdown'</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">MenuItem</span> <span class="attribute">key</span>=<span class="value">'1'</span>&gt;</span>Dropdown link<span class="tag">&lt;/<span class="title">MenuItem</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">MenuItem</span> <span class="attribute">key</span>=<span class="value">'2'</span>&gt;</span>Dropdown link<span class="tag">&lt;/<span class="title">MenuItem</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">DropdownButton</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">Button</span> <span class="attribute">bsStyle</span>=<span class="value">'info'</span>&gt;</span>Middle<span class="tag">&lt;/<span class="title">Button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">Button</span> <span class="attribute">bsStyle</span>=<span class="value">'info'</span>&gt;</span>Right<span class="tag">&lt;/<span class="title">Button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">ButtonGroup</span>&gt;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">React.render(buttonGroupInstance, mountNode);</span><br></pre></td></tr></table></figure>
<p>有些人对 React.js 的第一印象就是混合 JavaScript 和 HTML<br>会让代码看起来很混乱。然而，比较在这个例子中要添加一个 dropdown button 在<br>Bootstrap JavaScript 和 Component 文件中，Component<br>文件需要分成两个，因为你需要在代码中两个地方来实现这个组件：首先必须添加<br>HTML/CSS 元素，然后必须调用 JavaScript 把这两个组件写到一起。</p>
<p>React-Bootstrap 的组件希望遵循 React.js 的哲理，单独的功能需要放在单独的地方。<br>在 <a href="http://react-bootstrap.github.io/components.html" target="_blank" rel="external">组件页面</a> 查看当前的 React-Bootstrap 库。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://weixiaobo88.github.io/2016/01/12/20160112-React-Bootstrap-Introduction/" data-id="cijptqmdw000tacjej2d9rbt0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react-bootstrap/">react bootstrap</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-learn-react-router" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/11/learn-react-router/" class="article-date">
  <time datetime="2016-01-11T12:35:47.000Z" itemprop="datePublished">2016-01-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/11/learn-react-router/">learn-react-router</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>参考资料： <a href="https://github.com/rackt/react-router/blob/0.13.x/doc/06%20Mixins/State.md" target="_blank" rel="external">https://github.com/rackt/react-router/blob/0.13.x/doc/06%20Mixins/State.md</a></p>
<p>翻译： React Router 0.13.x 中的 State</p>
<p>State 是 components 的一个 mixin, 它需要知道 active params, query 和 routes. 任何拥有动态 segments 的路由处理器都想拥有 State.</p>
<h2 id="u5B9E_u4F8B_u65B9_u6CD5"><a href="#u5B9E_u4F8B_u65B9_u6CD5" class="headerlink" title="实例方法"></a>实例方法</h2><h3 id="getPath_28_29"><a href="#getPath_28_29" class="headerlink" title="getPath()"></a><code>getPath()</code></h3><p>返回当前 URL 路径, 包含 query 字符串</p>
<h3 id="getPathname_28_29"><a href="#getPathname_28_29" class="headerlink" title="getPathname()"></a><code>getPathname()</code></h3><p>返回当前 URL 路径, 不包含 query 字符串</p>
<h3 id="getParams_28_29"><a href="#getParams_28_29" class="headerlink" title="getParams()"></a><code>getParams()</code></h3><p>返回当前活跃的 URL 参数的哈希</p>
<h3 id="getQuery_28_29"><a href="#getQuery_28_29" class="headerlink" title="getQuery()"></a><code>getQuery()</code></h3><p>返回当前活跃的 query 参数的哈希</p>
<h3 id="isActive_28routeName_2C_params_2C_query_29"><a href="#isActive_28routeName_2C_params_2C_query_29" class="headerlink" title="isActive(routeName, params, query)"></a><code>isActive(routeName, params, query)</code></h3><p>当一个路由, 参数, query 是活跃的就返回 true, 反之返回 false</p>
<h3 id="getRoutes_28_29"><a href="#getRoutes_28_29" class="headerlink" title="getRoutes()"></a><code>getRoutes()</code></h3><p>以嵌套的形式返回当前活跃路由的数组</p>
<h2 id="u793A_u4F8B"><a href="#u793A_u4F8B" class="headerlink" title="示例"></a>示例</h2><p>通常你只想获得参数(params) 和 query:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// route</span></span><br><span class="line">&lt;Route name=<span class="string">"user"</span> path=<span class="string">"user/:name"</span> handler=&#123;User&#125; /&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// handler</span></span><br><span class="line"><span class="keyword">var</span> User = React.createClass(&#123;</span><br><span class="line"> mixins: [ Router.State ],</span><br><span class="line"></span><br><span class="line"> render: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> name = <span class="keyword">this</span>.getParams().name;</span><br><span class="line">   <span class="keyword">return</span> (</span><br><span class="line">     <span class="xml"><span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="title">h1</span>&gt;</span>&#123;name&#125;<span class="tag">&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">   )</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>如果你用 bootstrap 并且想得到 Tabs 上 li 标签中活跃的元素:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Link = <span class="built_in">require</span>(<span class="string">'react-router'</span>).Link;</span><br><span class="line"><span class="keyword">var</span> State = <span class="built_in">require</span>(<span class="string">'react-router'</span>).State;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Tab = React.createClass(&#123;</span><br><span class="line"></span><br><span class="line">  mixins: [ State ],</span><br><span class="line"></span><br><span class="line">  render: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> isActive = <span class="keyword">this</span>.isActive(<span class="keyword">this</span>.props.to, <span class="keyword">this</span>.props.params, <span class="keyword">this</span>.props.query);</span><br><span class="line">    <span class="keyword">var</span> className = isActive ? <span class="string">'active'</span> : <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">var</span> link = (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="title">Link</span> &#123;<span class="attribute">...this.props</span>&#125; /&gt;</span></span><br><span class="line">    )</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="title">li</span> <span class="attribute">className</span>=<span class="value">&#123;className&#125;</span>&gt;</span>&#123;link&#125;<span class="tag">&lt;/<span class="title">li</span>&gt;</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// use it just like &lt;Link/&gt;, and you'll get an anchor wrapped in an `li`</span></span><br><span class="line"><span class="comment">// with an automatic `active` class on both.</span></span><br><span class="line">&lt;Tab to=<span class="string">"foo"</span>&gt;Foo&lt;<span class="regexp">/Tab&gt;</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://weixiaobo88.github.io/2016/01/11/learn-react-router/" data-id="cijptqmdd000bacje7tiheiv6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react-router/">react router</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-learn-jade" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/15/learn-jade/" class="article-date">
  <time datetime="2015-08-15T07:12:51.000Z" itemprop="datePublished">2015-08-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/15/learn-jade/">Jade</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://weixiaobo88.github.io/2015/08/15/learn-jade/" data-id="cijptqmdf000eacje2f3ss75k" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-testing-in-spring" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/05/testing-in-spring/" class="article-date">
  <time datetime="2015-08-05T02:00:41.000Z" itemprop="datePublished">2015-08-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/05/testing-in-spring/">Testing in Spring</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="u5355_u5143_u6D4B_u8BD5"><a href="#u5355_u5143_u6D4B_u8BD5" class="headerlink" title="单元测试"></a>单元测试</h2><h3 id="Spring_Framework__u63D0_u4F9B_u7684_Mock_Objects"><a href="#Spring_Framework__u63D0_u4F9B_u7684_Mock_Objects" class="headerlink" title="Spring Framework 提供的 Mock Objects"></a>Spring Framework 提供的 Mock Objects</h3><ul>
<li>Environment, org.springframework.mock.env package, MockEnvironment and MockPropertySource</li>
<li>JNDI, org.springframework.mock.jndi, JNDI SPI</li>
<li>Servlet API, org.springframework.mock.web, 测试 web contexts, controllers, filters<ul>
<li>Spring MVC and REST Controllers 的集成测试可以参考 <a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/integration-testing.html#spring-mvc-test-framework" target="_blank" rel="external">Spring MVC Test Framework</a></li>
</ul>
</li>
<li>Portlet API</li>
</ul>
<h2 id="u96C6_u6210_u6D4B_u8BD5"><a href="#u96C6_u6210_u6D4B_u8BD5" class="headerlink" title="集成测试"></a>集成测试</h2><p>Spring 2.5 以后，在 Spring TestContext Framework 中提供了基于注解的单元测试和集成测试。</p>
<p>Spring 对于集成测试的支持有以下几个主要目标：</p>
<ul>
<li>测试执行过程中管理 Spring IoC 容器缓存</li>
<li>提供测试夹具（test fixture）实例的依赖注入(Dependency Injection)</li>
<li>提供集成测试中的事务管理</li>
<li>提供写集成测试中需要的特定的 Spring 基类</li>
</ul>
<h3 id="JDBC__u6D4B_u8BD5"><a href="#JDBC__u6D4B_u8BD5" class="headerlink" title="JDBC 测试"></a>JDBC 测试</h3><p>使用 JdbcTestUtils</p>
<h3 id="u6CE8_u89E3"><a href="#u6CE8_u89E3" class="headerlink" title="注解"></a>注解</h3><h2 id="Spring_MVC__u6D4B_u8BD5_u6846_u67B6"><a href="#Spring_MVC__u6D4B_u8BD5_u6846_u67B6" class="headerlink" title="Spring MVC 测试框架"></a>Spring MVC 测试框架</h2><p>建立在 spring-test 模块中的 Servlet API mock objects 之上，所以不需要一个运行的 Servlet 容器，它会使用 DispatcherServlet，提供所有的 Spring MVC 的支持，使用 TestContext 框架可以选择性的加载实际的 Spring 配置文件，</p>
<p>Spring MVC 测试提供了 client-side 的测试，使用 RestTemplate 来测试。Client-side 的测试会 mock 服务器的响应，并不需要一个运行的服务器。</p>
<h3 id="Server-Side__u670D_u52A1_u5668_u7AEF_u6D4B_u8BD5"><a href="#Server-Side__u670D_u52A1_u5668_u7AEF_u6D4B_u8BD5" class="headerlink" title="Server-Side 服务器端测试"></a>Server-Side 服务器端测试</h3><h4 id="u914D_u7F6E_u9879_Setup_Options"><a href="#u914D_u7F6E_u9879_Setup_Options" class="headerlink" title="配置项 Setup Options"></a>配置项 Setup Options</h4><p>有两种方式来创建 MockMvc的实例</p>
<ul>
<li>通过 TestContext 框架来加载 Spring MVC 的配置</li>
<li>手动创建 controller 的实例，不用加载 Spring 的配置</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">// 通过 TestContext 框架来加载 Spring MVC 的配置</span><br><span class="line">import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;</span><br><span class="line">import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;</span><br><span class="line"></span><br><span class="line">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="line">@WebAppConfiguration</span><br><span class="line">@ContextConfiguration(<span class="string">"test-servlet-context.xml"</span>)</span><br><span class="line">public class ExampleTests &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private WebApplicationContext wac;</span><br><span class="line"></span><br><span class="line">    private MockMvc mockMvc;</span><br><span class="line"></span><br><span class="line">    @Before</span><br><span class="line">    public void <span class="function"><span class="title">setup</span></span>() &#123;</span><br><span class="line">        this.mockMvc = MockMvcBuilders.webAppContextSetup(this.wac).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void getAccount() throws Exception &#123;</span><br><span class="line">        this.mockMvc.perform(get(<span class="string">"/accounts/1"</span>).accept(MediaType.parseMediaType(<span class="string">"application/json;charset=UTF-8"</span>)))</span><br><span class="line">            .andExpect(status().isOk())</span><br><span class="line">            .andExpect(content().contentType(<span class="string">"application/json"</span>))</span><br><span class="line">            .andExpect(jsonPath(<span class="string">"$.name"</span>).value(<span class="string">"Lee"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 手动创建 controller 的实例</span><br><span class="line">public class MyWebTests &#123;</span><br><span class="line"></span><br><span class="line">    private MockMvc mockMvc;</span><br><span class="line"></span><br><span class="line">    @Before</span><br><span class="line">    public void <span class="function"><span class="title">setup</span></span>() &#123;</span><br><span class="line">        this.mockMvc = MockMvcBuilders.standaloneSetup(new AccountController()).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ...</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="u9009_u62E9_u54EA_u4E00_u79CD_uFF1F"><a href="#u9009_u62E9_u54EA_u4E00_u79CD_uFF1F" class="headerlink" title="选择哪一种？"></a>选择哪一种？</h5><ul>
<li>“webAppContextSetup”<ul>
<li>“webAppContextSetup” 加载实际的 Spring MVC 配置，能够提供一个更完整的集成测试。</li>
<li>而且 TestContext 框架能够缓存加载的 Spring 配置，保证测试能够快速运行。 </li>
<li>另外，你还可以通过 Spring 的配置，在 controller 中注入 mock 的 services，这样可以把关注点放在测试 web 层。</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// 使用 Mockito 声明一个 mock 的 service </span><br><span class="line">&lt;bean id=<span class="string">"accountService"</span> class=<span class="string">"org.mockito.Mockito"</span> factory-method=<span class="string">"mock"</span>&gt;</span><br><span class="line">    &lt;constructor-arg value=<span class="string">"org.example.AccountService"</span>/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">// 在测试中就可以使用这个 mock 的 service</span><br><span class="line">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="line">@WebAppConfiguration</span><br><span class="line">@ContextConfiguration(<span class="string">"test-servlet-context.xml"</span>)</span><br><span class="line">public class AccountTests &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private WebApplicationContext wac;</span><br><span class="line"></span><br><span class="line">    private MockMvc mockMvc;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private AccountService accountService;</span><br><span class="line"></span><br><span class="line">    // ...</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>“standaloneSetup” <ul>
<li>“standaloneSetup” 更像单元测试，每次测一个 controller，controller 可以用 mock 的依赖手动注入，不需要加载 Spring 配置。</li>
<li>可以很容易的看到是在测是哪一个 controller</li>
<li>对于写 ad-hoc 测试来验证行为或者 debug 的时候很方便</li>
<li>要写 “webAppContextSetup” 测试来验证 Spring MVC 配置</li>
</ul>
</li>
</ul>
<h4 id="u6267_u884C_u8BF7_u6C42_Performing_Requests"><a href="#u6267_u884C_u8BF7_u6C42_Performing_Requests" class="headerlink" title="执行请求 Performing Requests"></a>执行请求 Performing Requests</h4><ul>
<li>用 HTTP 方法</li>
<li>用 file upload 请求</li>
</ul>
<h4 id="u5B9A_u4E49_Expectations"><a href="#u5B9A_u4E49_Expectations" class="headerlink" title="定义 Expectations"></a>定义 Expectations</h4><p>有两种类型</p>
<ul>
<li>验证 response 的属性，比如 response 的 status, headers, content</li>
<li>验证 Spring MVC 具体的事情，比如哪个 controller 的方法处理了这个请求，是否有 exception 抛出和处理，model 的内容是什么，选择了哪个 view 等。</li>
</ul>
<h2 id="u4E0E_u7AEF_u5230_u7AEF_u57FA_u7840_u6D4B_u8BD5_u7684_u533A_u522B"><a href="#u4E0E_u7AEF_u5230_u7AEF_u57FA_u7840_u6D4B_u8BD5_u7684_u533A_u522B" class="headerlink" title="与端到端基础测试的区别"></a>与端到端基础测试的区别</h2><ul>
<li>blank MockHttpServletRequest</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://weixiaobo88.github.io/2015/08/05/testing-in-spring/" data-id="cijptqmcu0001acje61abrsz1" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spring-test/">spring test</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-modular-programming-03" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/04/modular-programming-03/" class="article-date">
  <time datetime="2015-08-04T06:33:11.000Z" itemprop="datePublished">2015-08-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/04/modular-programming-03/">模块化编程 Modular Programming 03 —— require.js 的用法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="u4E3A_u4EC0_u4E48_u8981_u7528_require-js"><a href="#u4E3A_u4EC0_u4E48_u8981_u7528_require-js" class="headerlink" title="为什么要用 require.js"></a>为什么要用 require.js</h2><p>最早的时候，所有Javascript代码都写在一个文件里面，只要加载这一个文件就够了。后来，代码越来越多，一个文件不够了，必须分成多个文件，依次加载。</p>
<pre><code><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"1.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"2.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"3.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"4.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"5.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"6.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</code></pre><p>这样的写法的缺点：</p>
<pre><code>- 加载文件过多，网页失去响应的时间就会越长
- 由于js文件之间存在依赖关系，因此必须严格保证加载顺序（比如上例的1.js要在2.js的前面），依赖性最大的模块一定要放到最后加载，当依赖关系很复杂的时候，代码的编写和维护都会变得困难
</code></pre><p>require.js的诞生，就是为了解决这两个问题：</p>
<pre><code>- 实现js文件的异步加载，避免网页失去响应；
- 管理模块之间的依赖性，便于代码的编写和维护。
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://weixiaobo88.github.io/2015/08/04/modular-programming-03/" data-id="cijptqmcz0004acje8fwesrfr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/modular-programming/">modular programming</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-modular-programming-02" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/04/modular-programming-02/" class="article-date">
  <time datetime="2015-08-04T04:46:39.000Z" itemprop="datePublished">2015-08-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/04/modular-programming-02/">模块化编程 Modular Programming 02 —— AMD 规范</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>参考资料： <a href="http://www.ruanyifeng.com/blog/2012/10/asynchronous_module_definition.html" target="_blank" rel="external">http://www.ruanyifeng.com/blog/2012/10/asynchronous_module_definition.html</a></p>
<p>讨论：如何在浏览器环境组织不同的模块、管理模块之间的依赖性</p>
<h2 id="u4E3A_u4EC0_u4E48_u8981_u6709_u6A21_u5757"><a href="#u4E3A_u4EC0_u4E48_u8981_u6709_u6A21_u5757" class="headerlink" title="为什么要有模块"></a>为什么要有模块</h2><p>因为有了模块，我们就可以更方便地使用别人的代码，想要什么功能，就加载什么模块。</p>
<p>但是，这样做有一个前提，那就是大家必须以同样的方式编写模块，否则你有你的写法，我有我的写法，岂不是乱了套！</p>
<p>目前，通行的 JavaScript 模块规范共有两种：CommonJS 和 AMD。我主要介绍 AMD，但是要先从 CommonJS 讲起。</p>
<h2 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h2><p>2009 年 node.js 项目诞生， JavaScript 也开始用于服务器端编程。在浏览器环境下，没有模块也不是特别大的问题，毕竟网页程序的复杂性有限；但是在服务器端，一定要有模块，与操作系统和其他应用程序互动，否则根本没法编程。 </p>
<p>node.js 的模块系统就是参照 CommonJS 规范实现的。</p>
<p>在 CommonJS 中，有一个全局方法 require()，用于加载模块。</p>
<h3 id="u6D4F_u89C8_u5668_u73AF_u5883"><a href="#u6D4F_u89C8_u5668_u73AF_u5883" class="headerlink" title="浏览器环境"></a>浏览器环境</h3><p>有了服务器端的模块以后，大家就像要客户端模块。而且最好两者能够兼容，一个模块不用修改，在服务器和浏览器都可以运行。</p>
<p>但是，由于一个重大的局限，使得CommonJS规范不适用于浏览器环境。<br>    <figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt;原因是，在服务器端模块都在本地硬盘，可以同步加载完成，等待时间就是硬盘的读取时间。</span><br><span class="line">但是，对于浏览器，这却是一个大问题，因为模块都放在服务器端，等待时间取决于网速的快慢，可能要等很长时间，浏览器处于<span class="string">"假死"</span>状态。</span><br><span class="line"></span><br><span class="line">var <span class="built_in">math</span> = <span class="built_in">require</span>(<span class="string">'math'</span>);</span><br><span class="line">    　　 <span class="built_in">math</span>.add(<span class="number">2</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure></p>
<p>对于浏览器端来说，只能采用“异步加载”，这也是 AMD 规范诞生的背景。</p>
<h2 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h2><p>AMD是”Asynchronous Module Definition”的缩写，意思就是”异步模块定义”。它采用异步方式加载模块，模块的加载不影响它后面语句的运行。所有依赖这个模块的语句，都定义在一个回调函数中，等到加载完成之后，这个回调函数才会运行。</p>
<p>AMD也采用require()语句加载模块，但是不同于CommonJS，它要求两个参数：<br>    <figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require</span>([<span class="class"><span class="keyword">module</span>], <span class="title">callback</span>);</span></span><br></pre></td></tr></table></figure></p>
<pre><code>第一个参数[module]，是一个数组，里面的成员就是要加载的模块；第二个参数callback，则是加载成功之后的回调函数。
如果将前面的代码改写成AMD形式，就是下面这样：
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>([<span class="string">'math'</span>], <span class="function"><span class="keyword">function</span> <span class="params">(math)</span></span> &#123;</span><br><span class="line">　　　　<span class="built_in">math</span>.add(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">　　&#125;);</span><br></pre></td></tr></table></figure>

math.add()与math模块加载不是同步的，浏览器不会发生假死。
</code></pre><p>目前，主要有两个JavaScript库实现了AMD规范：require.js和curl.js。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://weixiaobo88.github.io/2015/08/04/modular-programming-02/" data-id="cijptqmd80007acjepahtnq3k" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/modular-programming/">modular programming</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/bind/">bind</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/functional-programming/">functional-programming</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gradle/">gradle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/modular-programming/">modular programming</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm-package-json/">npm, package.json</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-bootstrap/">react bootstrap</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-router/">react router</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/servlet/">servlet</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/">spring</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring-test/">spring test</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/bind/" style="font-size: 10px;">bind</a> <a href="/tags/functional-programming/" style="font-size: 13.33px;">functional-programming</a> <a href="/tags/gradle/" style="font-size: 10px;">gradle</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/modular-programming/" style="font-size: 20px;">modular programming</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/npm-package-json/" style="font-size: 10px;">npm, package.json</a> <a href="/tags/react-bootstrap/" style="font-size: 10px;">react bootstrap</a> <a href="/tags/react-router/" style="font-size: 10px;">react router</a> <a href="/tags/servlet/" style="font-size: 13.33px;">servlet</a> <a href="/tags/spring/" style="font-size: 16.67px;">spring</a> <a href="/tags/spring-test/" style="font-size: 10px;">spring test</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/01/22/20160122-bind-in-javascript-md/">Bind in JavaScript</a>
          </li>
        
          <li>
            <a href="/2016/01/21/20160121-npm-package-file-md/">20160121-npm-package-file.md</a>
          </li>
        
          <li>
            <a href="/2016/01/18/20160118-functional-programming-monad/">Monad</a>
          </li>
        
          <li>
            <a href="/2016/01/14/20160114-functional-programming/">Functional Programming</a>
          </li>
        
          <li>
            <a href="/2016/01/12/20160112-React-Bootstrap-Introduction/">React-Bootstrap-Introduction</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Linne<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>