title: 20160314-commonjs
date: 2016-03-14 09:02:33
tags:
- JavaScript
- modular programming
---

参考 http://0fps.net/2013/01/22/commonjs-why-and-how/

随着 JavaScript 解释器的快速发展, 新的 API 比如 HTML5 和 WebGL 的出现, 
基于单页面的应用以及 JavaScript 的开发成为趋势, JavaScript 在桌面, 手机等移动端, 甚至是控制台都运行的很好.

## Module Systems

用 JavaScript 固然很好, 但是它的项目规模的伸缩性比较差, 主要原因是它缺乏任何像一致模块化系统的东西. 这给以下实践带来了困难:

- 将实现细节隐藏在接口之后
- 将大项目分成多个文件
- 从库以及代码库中复用功能
   

如何解决这些问题:
   
- Ad-Hoc, 使用闭包, 也就是[module design pattern](http://www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html)
```
var MyModule = (function() {
  var exports = {};
  //Export foo to the outside world
  exports.foo = function() {
   // ...
  }

  //Keep bar private
  var bar = { /* ... */ };

  //Expose interface to outside world
  return exports;
})();
```

  * 缓解全局命名空间带来的烦恼
  * 可以解决第一个问题, 将实现细节隐藏在接口之后
- 上面这个方法没有解决多文件的引用问题
  * 你可以使用 `<script>` 标签挨个 import JS 文件 (开发的时候不需要重新build) 
  * 也可以使用静态 build 过程来拼接所有文件 (更少的 HTTP 请求, 工具有 [Google’s closure compiler](https://developers.google.com/closure/compiler/))
 
  这两种方法都无法让你有选择的 import, 并且无法很好的处理外部依赖           
  
  减少请求的方式, 比如第三方库 jQuery, YUI, THREE.js 等, 但是需要依赖第三方库.

- CommonJS 模块系统
  
CommonJS 模块系统可以解决以上这些问题.




https://egghead.io/series/getting-started-with-redux
https://github.com/markerikson/react-redux-links
http://pinggod.com/2016/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E7%9A%84%E5%8D%81%E4%BA%8C%E4%B8%AA%E6%96%B9%E9%9D%A2/
http://pinggod.com/2016/Lazy-loading-images-on-the-web/


   

